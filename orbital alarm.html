<!DOCTYPE html>
<html>
<head>
  <title>Solar Alarm</title>
  <style>
    body {
      background: black;
      color: white;
      text-align: center;
      font-family: sans-serif;
    }

    #orbit {
      width: 400px;
      height: 400px;
      border: 2px dashed white;
      border-radius: 50%;
      margin: 50px auto;
      position: relative;
    }

    #sun {
      width: 60px;
      height: 60px;
      background: yellow;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 30px orange;
    }

    #earth {
      width: 30px;
      height: 30px;
      background: skyblue;
      border-radius: 50%;
      position: absolute;
      cursor: grab;
    }

    #time {
      margin-top: 20px;
      font-size: 1.5em;
    }

    #setAlarmBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      background: #0af;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #setAlarmBtn:hover {
      background: #09c;
    }

    #status {
      margin-top: 10px;
      color: lime;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>üåç Drag Earth to Set Alarm üåû</h1>
  <div id="orbit">
    <div id="sun"></div>
    <div id="earth"></div>
  </div>

  <div id="time">Selected Time: --:--</div>
  <button id="setAlarmBtn">Set Alarm</button>
  <div id="status"></div>

  <audio id="alarm" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio>

  <script>
    const orbit = document.getElementById("orbit");
    const earth = document.getElementById("earth");
    const timeDisplay = document.getElementById("time");
    const alarmSound = document.getElementById("alarm");
    const setAlarmBtn = document.getElementById("setAlarmBtn");
    const statusText = document.getElementById("status");

    const radius = 200;
    const centerX = radius;
    const centerY = radius;
    let selectedHour = null;
    let selectedMin = null;
    let alarmHour = null;
    let alarmMin = null;
    let alarmSet = false;

    function setEarthPosition(angle) {
      const rad = angle * Math.PI / 180;
      const x = centerX + radius * Math.cos(rad) - earth.offsetWidth / 2;
      const y = centerY + radius * Math.sin(rad) - earth.offsetHeight / 2;
      earth.style.left = `${x}px`;
      earth.style.top = `${y}px`;
    }

    function getAngleFromMouse(x, y) {
      const dx = x - (orbit.getBoundingClientRect().left + centerX);
      const dy = y - (orbit.getBoundingClientRect().top + centerY);
      let angle = Math.atan2(dy, dx) * (180 / Math.PI);
      if (angle < 0) angle += 360;
      return angle;
    }

    function angleToTime(angle) {
      const totalMinutes = Math.round((angle / 360) * 1440);
      const h = Math.floor(totalMinutes / 60);
      const m = totalMinutes % 60;
      return { h, m };
    }

    // Drag Logic
    let dragging = false;

    orbit.addEventListener("mousedown", (e) => {
      dragging = true;
      moveEarth(e);
    });

    document.addEventListener("mousemove", (e) => {
      if (dragging) moveEarth(e);
    });

    document.addEventListener("mouseup", () => dragging = false);

    function moveEarth(e) {
      const angle = getAngleFromMouse(e.clientX, e.clientY);
      setEarthPosition(angle);
      const { h, m } = angleToTime(angle);
      selectedHour = h;
      selectedMin = m;
      timeDisplay.textContent = `Selected Time: ${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}`;
      statusText.textContent = "";
    }

    // Set Alarm Button
    setAlarmBtn.addEventListener("click", () => {
      if (selectedHour !== null && selectedMin !== null) {
        alarmHour = selectedHour;
        alarmMin = selectedMin;
        alarmSet = true;
        statusText.textContent = `‚è∞ Alarm set for ${String(alarmHour).padStart(2, '0')}:${String(alarmMin).padStart(2, '0')}`;
      }
    });

    // Clock Checker
    setInterval(() => {
      const now = new Date();
      if (alarmSet &&
          now.getHours() === alarmHour &&
          now.getMinutes() === alarmMin &&
          now.getSeconds() === 0) {
        alarmSound.play();
        alert("üö® Alarm Time Reached!");
        alarmSet = false;
        statusText.textContent = "Alarm Triggered! Set again if needed.";
      }
    }, 1000);

    // Start with Earth at top (12:00 AM)
    setEarthPosition(270);
  </script>
</body>
</html>
